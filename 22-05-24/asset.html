<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Asset Management : Exclamatory Labs</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" integrity="sha384-DyZ88mC6Up2uqS3XRvu2Kn1J8HI8Ll7Fpp6M1iwZbQcTh7H6E1t6Xqmd6ZtU7Mg" crossorigin="anonymous">
  <link rel="stylesheet" href="asset.css">
</head>
<body>
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-12">
        <div class="card">
          <div class="card-header d-flex justify-content-between align-items-center">
            <h3 class="card-title text-center">Asset Management</h3>
          </div>
          <div class="card-body">
            <div class="table-responsive">
              <table class="table table-bordered table-hover">
                <thead class="thead-dark">
                  <tr>
                    <th>Id</th>
                    <th>View Details</th>
                    <th>Asset Tag</th>
                    <th>Serial No.</th>
                    <th>Model</th>
                    <th>Assigned Request No.</th>
                    <th>Attested Status</th>
                    <th>Attested Date</th>
                    <th>Certify</th>
                    <th>Edit / Delete</th>
                  </tr>
                </thead>
                <tbody id="assetTblId">
                  <!-- Dynamic rows will be inserted here -->
                </tbody>
              </table>
            </div>
            <button class="btn btn-primary mt-3" data-toggle="modal" data-target="#addAssetModal"><i class="fas fa-plus"></i> Add Asset</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- View/Edit Modal -->
  <div class="modal fade" id="assetModal" tabindex="-1" role="dialog" aria-labelledby="assetModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="assetModalLabel">Asset Details</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <form id="assetForm">
            <div class="form-group">
              <label for="modalAssetId">ID</label>
              <input type="text" class="form-control" id="modalAssetId" readonly>
            </div>
            <div class="form-group">
              <label for="modalAssetTag">Asset Tag</label>
              <input type="text" class="form-control" id="modalAssetTag">
            </div>
            <div class="form-group">
              <label for="modalSerialNo">Serial No.</label>
              <input type="text" class="form-control" id="modalSerialNo">
            </div>
            <div class="form-group">
              <label for="modalModel">Model</label>
              <input type="text" class="form-control" id="modalModel">
            </div>
            <div class="form-group">
              <label for="modalRequestNo">Assigned Request No.</label>
              <input type="text" class="form-control" id="modalRequestNo">
            </div>
            <div class="form-group">
              <label for="modalAttStatus">Attested Status</label>
              <input type="text" class="form-control" id="modalAttStatus">
            </div>
            <div class="form-group">
              <label for="modalAttDate">Attested Date</label>
              <input type="text" class="form-control" id="modalAttDate">
            </div>
            <div class="form-group">
              <label for="modalCertify">Certify</label>
              <input type="text" class="form-control" id="modalCertify">
            </div>
            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            <button type="button" class="btn btn-primary" id="saveChanges">Save Changes</button>
          </form>
        </div>
      </div>
    </div>
  </div>

  <!-- Add Asset Modal -->
  <div class="modal fade" id="addAssetModal" tabindex="-1" role="dialog" aria-labelledby="addAssetModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="addAssetModalLabel">Add New Asset</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <form id="addAssetForm">
            <div class="form-group">
              <label for="addAssetId">ID</label>
              <input type="text" class="form-control" id="addAssetId" required>
            </div>
            <div class="form-group">
              <label for="addAssetTag">Asset Tag</label>
              <input type="text" class="form-control" id="addAssetTag" required>
            </div>
            <div class="form-group">
              <label for="addSerialNo">Serial No.</label>
              <input type="text" class="form-control" id="addSerialNo" required>
            </div>
            <div class="form-group">
              <label for="addModel">Model</label>
              <input type="text" class="form-control" id="addModel" required>
            </div>
            <div class="form-group">
              <label for="addRequestNo">Assigned Request No.</label>
              <input type="text" class="form-control" id="addRequestNo" required>
            </div>
            <div class="form-group">
              <label for="addAttStatus">Attested Status</label>
              <input type="text" class="form-control" id="addAttStatus">
            </div>
            <div class="form-group">
              <label for="addAttDate">Attested Date</label>
              <input type="date" class="form-control" id="addAttDate">
            </div>
            <div class="form-group">
              <label for="addCertify">Certify</label>
              <input type="text" class="form-control" id="addCertify" required>
            </div>
            <button type="submit" class="btn btn-primary">Add Asset</button>
          </form>
        </div>
      </div>
    </div>
  </div>

  <script>
    let assets = [
      {
        _id: "ASST121",
        tag: "ASSTEXCL123",
        serialNo: "92198765",
        model: "DELL5000",
        requestNo: "REQ123",
        attStatus: "",
        certify: "Yes"
      },
      {
        _id: "ASST122",
        tag: "ASSTEXCL123",
        serialNo: "92198765",
        model: "DELL5000",
        requestNo: "REQ123",
        attStatus: "",
        certify: "Yes"
      },
      {
        _id: "ASST123",
        tag: "ASSTEXCL123",
        serialNo: "92198765",
        model: "DELL5000",
        requestNo: "REQ123",
        attStatus: "",
        certify: "Yes"
      },
      {
        _id: "ASST124",
        tag: "ASSTEXCL123",
        serialNo: "92198765",
        model: "DELL5000",
        requestNo: "REQ123",
        attStatus: "",
        certify: "Yes"
      }
    ];

    function renderTable() {
      let table = document.getElementById('assetTblId');
      table.innerHTML = '';
      assets.forEach((asset) => {
        let row = document.createElement('tr');
        row.innerHTML = `
          <td>${asset._id}</td>
          <td><i class="fas fa-eye icon-action view-btn" data-id="${asset._id}"></i></td>
          <td>${asset.tag}</td>
          <td>${asset.serialNo}</td>
          <td>${asset.model}</td>
          <td>${asset.requestNo}</td>
          <td>${asset.attStatus}</td>
          <td>Attested Date</td>
          <td>${asset.certify}</td>
          <td>
            <i class="fas fa-edit icon-action edit-btn" data-id="${asset._id}"></i>
            <i class="fas fa-trash icon-action delete-btn" data-id="${asset._id}"></i>
          </td>`;
        table.appendChild(row);
      });

      document.querySelectorAll('.view-btn').forEach(button => {
        button.addEventListener('click', (e) => {
          const id = e.target.getAttribute('data-id');
          const asset = assets.find(a => a._id === id);

          document.getElementById('modalAssetId').value = asset._id;
          document.getElementById('modalAssetTag').value = asset.tag;
          document.getElementById('modalSerialNo').value = asset.serialNo;
          document.getElementById('modalModel').value = asset.model;
          document.getElementById('modalRequestNo').value = asset.requestNo;
          document.getElementById('modalAttStatus').value = asset.attStatus;
          document.getElementById('modalAttDate').value = 'Attested Date';
          document.getElementById('modalCertify').value = asset.certify;

          $('#assetModal').modal('show');
        });
      });

      document.querySelectorAll('.edit-btn').forEach(button => {
        button.addEventListener('click', (e) => {
          const id = e.target.getAttribute('data-id');
          const asset = assets.find(a => a._id === id);

          document.getElementById('modalAssetId').value = asset._id;
          document.getElementById('modalAssetTag').value = asset.tag;
          document.getElementById('modalSerialNo').value = asset.serialNo;
          document.getElementById('modalModel').value = asset.model;
          document.getElementById('modalRequestNo').value = asset.requestNo;
          document.getElementById('modalAttStatus').value = asset.attStatus;
          document.getElementById('modalAttDate').value = 'Attested Date';
          document.getElementById('modalCertify').value = asset.certify;

          $('#assetModal').modal('show');
          document.getElementById('saveChanges').onclick = () => {
            asset.tag = document.getElementById('modalAssetTag').value;
            asset.serialNo = document.getElementById('modalSerialNo').value;
            asset.model = document.getElementById('modalModel').value;
            asset.requestNo = document.getElementById('modalRequestNo').value;
            asset.attStatus = document.getElementById('modalAttStatus').value;
            asset.attDate = document.getElementById('modalAttDate').value;
            asset.certify = document.getElementById('modalCertify').value;
            $('#assetModal').modal('hide');
            renderTable();
          };
        });
      });

      document.querySelectorAll('.delete-btn').forEach(button => {
        button.addEventListener('click', (e) => {
          const id = e.target.getAttribute('data-id');
          const assetIndex = assets.findIndex(a => a._id === id);
          if (assetIndex > -1) {
            assets.splice(assetIndex, 1);
            renderTable();
          }
        });
      });
    }

    document.getElementById('addAssetForm').addEventListener('submit', (e) => {
      e.preventDefault();
      const newAsset = {
        _id: document.getElementById('addAssetId').value,
        tag: document.getElementById('addAssetTag').value,
        serialNo: document.getElementById('addSerialNo').value,
        model: document.getElementById('addModel').value,
        requestNo: document.getElementById('addRequestNo').value,
        attStatus: document.getElementById('addAttStatus').value,
        certify: document.getElementById('addCertify').value
      };
      assets.push(newAsset);
      $('#addAssetModal').modal('hide');
      renderTable();
    });

    renderTable();
  </script>

  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</body>
</html>
